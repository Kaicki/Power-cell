<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CinePower - Login</title>
<style>
  body { background:#000; color:#fff; font-family: Arial, sans-serif; display:flex; justify-content:center; align-items:center; height:100vh; }
  #loginPanel { background:#222; padding:30px; border-radius:8px; width:300px; }
  input, select, button { width:100%; margin:5px 0; padding:8px; border-radius:4px; border:none; }
  button { background:#28a745; color:#fff; font-weight:bold; cursor:pointer; }
</style>
</head>
<body>

<div id="loginPanel">
  <h3>Login</h3>
  <input type="email" id="emailLogin" placeholder="Email">
  <input type="password" id="senhaLogin" placeholder="Senha">
  <button onclick="login()">Entrar</button>

  <p style="margin-top:10px; font-size:14px;">Não tem conta? Cadastre abaixo</p>
  <input type="email" id="emailSignup" placeholder="Email">
  <input type="password" id="senhaSignup" placeholder="Senha">
  <select id="roleSignup">
    <option value="user">Usuário</option>
    <option value="admin">Admin</option>
  </select>
  <button onclick="signup()">Cadastrar</button>
</div>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js"></script>

<script>
  const firebaseConfig = {
    apiKey: "SUA_API_KEY",
    authDomain: "seu-projeto.firebaseapp.com",
    projectId: "seu-projeto",
    storageBucket: "seu-projeto.appspot.com",
    messagingSenderId: "123456789",
    appId: "1:123456789:web:abcdef"
  };

  const app = firebase.initializeApp(firebaseConfig);
  const auth = firebase.auth();
  const db = firebase.firestore();

  async function signup() {
    const email = document.getElementById("emailSignup").value.trim();
    const senha = document.getElementById("senhaSignup").value.trim();
    const role = document.getElementById("roleSignup").value;
    if(!email || !senha) return alert("Preencha email e senha!");
    try {
      const userCredential = await auth.createUserWithEmailAndPassword(email, senha);
      await db.collection("usuarios").doc(userCredential.user.uid).set({email, role});
      alert("Cadastro realizado com sucesso!");
      document.getElementById("emailSignup").value="";
      document.getElementById("senhaSignup").value="";
    } catch(err) { alert("Erro: "+err.message); }
  }

  async function login() {
    const email = document.getElementById("emailLogin").value.trim();
    const senha = document.getElementById("senhaLogin").value.trim();
    if(!email || !senha) return alert("Preencha email e senha!");
    try {
      await auth.signInWithEmailAndPassword(email, senha);
      window.location.href = "catalogo.html"; // redireciona para o catálogo
    } catch(err) { alert("Erro: "+err.message); }
  }
</script>

</body>
</html>
